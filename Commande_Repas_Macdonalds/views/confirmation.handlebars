<br>
<br>
<div class="container">
    <center>
        <h1 style="color: red;">Votre Re√ßu</h1>
    </center>
    <div class="row">
        <div class="col">

        </div>
        <div class="col-md-auto">

        </div>
        <div class="col col-lg-2">
            <button id="imprime_pdf" type="button" class="btn btn-warning">Imprimer PDF</button>
        </div>
    </div>
</div>


<div class="container" id="i1">

    <table class="table" id="i2">
        <thead>
            <tr>
                <img src="" alt="">
                <th scope="col">image</th>
                <th scope="col">Name prodact</th>
                <th scope="col">prix</th>
                <th scope="col">contity</th>
                <th scope="col">prix</th>
            </tr>
        </thead>
        <tbody id="body_table">

        </tbody>
    </table>

</div>



<script>
    function onload_start() {

        if (sessionStorage.getItem("modeCommande") == "sur_place") {
            if (localStorage.getItem('num_place') == null) {
                localStorage.setItem("num_place", 1);
            } else {
                var num_place_actuellement = localStorage.getItem('num_place');
                num_place_actuellement = parseFloat(num_place_actuellement) + 1;
                localStorage.setItem("num_place", num_place_actuellement);
            }
        }

        var body_table = document.getElementById("body_table");

        let old_data = JSON.parse(localStorage.getItem('data'));
        var prixOneProdact = 0;
        var prixProdactTotal = 0;

        for (i = 0; i < old_data.length; i++) {
            prixOneProdact = (old_data[i].prixData) * (old_data[i].contityData);
            prixProdactTotal = prixProdactTotal + prixOneProdact;
            body_table.innerHTML += '<tr><td><img src="/images/' + old_data[i].imgchemainData + '/../' + old_data[i].imgData + '" alt=""></td> <td>' + old_data[i].nameData + '  <br><input type="hidden" id="prixOneProdactData2' + i + '" value="' + old_data[i].prixData + '">   <p><span id="prixOneProdactData' + i + '" >' + old_data[i].prixData + '</span> <span> DH </span></p></td> <td></td> <td><p>' + old_data[i].contityData + '</p>   </td> <td><p id="prixOneProdact' + i + '">' + prixOneProdact + '</p>  <input type="hidden" id="prixOneProdact2' + i + '" value="' + prixOneProdact + '"></tr>';
            prixOneProdact = 0;
        }
        body_table.innerHTML += '<tr><p style="color:red;">Prix Total : <span id="prixtotal">' + prixProdactTotal + '</span> DH</p><input type="hidden" id="prixtotal2" value="' + prixProdactTotal + '"></tr>';

        if (localStorage.getItem('PrixTotal') == null) {

            localStorage.setItem("PrixTotal", prixProdactTotal);
        }


        document.getElementById("imprime_pdf").addEventListener("click", () => {
            const invoice = this.document.getElementById("i1");
            console.log(invoice);
            console.log(window);

            html2pdf().from(invoice).save();
            localStorage.clear();
            //window.location.assign("http://localhost:3000/");
        });
        const invoice = this.document.getElementById("i1");
        console.log(invoice);
        console.log(window);

        html2pdf().from(invoice).save();
        localStorage.clear();
    }


</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.9.2/html2pdf.bundle.js"></script>